generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id                         String                 @id @default(cuid())
  email                      String?                @unique
  password                   String?
  emailVerified              DateTime?
  image                      String?
  name                       String?
  organisedTrips             Trip[]                 @relation("OrganiserToTrip")
  likedPotenialAccoms        PotentialAccom[]       @relation("LikesAccom")
  likedPotentialDestinations PotentialDestination[] @relation("LikesDest")
  memberOfTrips              Trip[]                 @relation("MembersToTrip")
}

model Trip {
  id              String                 @id @default(cuid())
  name            String
  airbnb          String?
  dates           String?
  finalised       Boolean                @default(false)
  organiserId     String
  city            String?
  country         String?
  votingStage     String                 @default("none")
  moodboardAccoms PotentialAccom[]
  moodboardTrips  PotentialDestination[]
  organiser       User                   @relation("OrganiserToTrip", fields: [organiserId], references: [id], onDelete: Cascade)
  members         User[]                 @relation("MembersToTrip")
}

model PotentialDestination {
  id          String   @id @default(cuid())
  tripId      String
  city        String
  country     String
  photoUrl    String?
  description String?
  activities  String[]
  trip        Trip     @relation(fields: [tripId], references: [id], onDelete: Cascade)
  likedBy     User[]   @relation("LikesDest")
}

model PotentialAccom {
  id          String @id @default(cuid())
  tripId      String
  photoUrl    String
  description String
  airBnbUrl   String
  trip        Trip   @relation(fields: [tripId], references: [id], onDelete: Cascade)
  likedBy     User[] @relation("LikesAccom")
}
